(ns web-crawler2.core)
(use 'web-crawler2.soup)

(defn get-links [page] 
	($ (get! page) td "a[href]" (attr "abs:href")))

#_(defn crawl [url current-depth max-depth]
	(def hrefs (get-links url))
	(if (< current-depth max-depth)
		(map crawl hrefs (iterate eval (inc current-depth)) (iterate eval max-depth))
		;(for [x hrefs] (crawl x (inc current-depth) max-depth))
		hrefs))

